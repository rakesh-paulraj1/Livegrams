FROM node:20-bookworm-slim

WORKDIR /usr/src/app

COPY package.json pnpm-lock.yaml pnpm-workspace.yaml turbo.json ./


  
COPY ./packages ./packages
COPY ./apps/web ./apps/web

RUN npm install -g pnpm

RUN pnpm install --frozen-lockfile

RUN pnpm run db:generate
RUN pnpm run build:web

EXPOSE 3000

CMD ["pnpm", "run", "start:web"]
